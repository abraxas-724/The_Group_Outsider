:root{
  --bg:#0f1221;--panel:#111733;--ink:#e2e8f0;--muted:#9aa4b2;--primary:#6ee7ff;--accent:#ffc857;--danger:#ff6b6b;
}
html,body{height:100%}
body{margin:0;display:flex;align-items:center;justify-content:center;background:radial-gradient(1200px 700px at 50% -10%,#1b2352 0%, #0f1221 60%, #0b0e1c 100%);font-family:ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial; color:var(--ink)}
.wrap{width:min(1000px,92vw);background:linear-gradient(180deg,rgba(255,255,255,.04),rgba(255,255,255,.02));border:1px solid rgba(255,255,255,.1);border-radius:16px;box-shadow:0 20px 60px rgba(0,0,0,.45);padding:18px 18px 10px}
.top{display:flex;align-items:center;gap:10px;margin-bottom:10px}
.badge{padding:4px 8px;border-radius:999px;background:rgba(255,255,255,.08);color:var(--muted);font-size:12px}
.title{flex:1;font-weight:700;letter-spacing:.3px}
.btn{background:#1d254f;color:#e6f6ff;border:1px solid rgba(255,255,255,.12);padding:8px 12px;border-radius:10px;cursor:pointer}
.btn:hover{filter:brightness(1.08)}
.grid{display:grid;grid-template-columns:280px 1fr;gap:14px}
.panel{background:var(--panel);border:1px solid rgba(255,255,255,.1);border-radius:12px;padding:12px;min-height:480px}
.panel h3{margin:0 0 8px;font-size:14px;color:#d8e4ff}

.rule{display:flex;align-items:center;gap:8px;padding:8px;border-radius:8px;background:rgba(255,255,255,.03);margin-bottom:8px}
.rule .pin{width:8px;height:8px;border-radius:999px;background:var(--accent);box-shadow:0 0 8px var(--accent)}
.rule .desc{font-size:13px;color:#e8ecf8}

svg{width:100%;height:100%;}
.canvas{position:relative;background:#0a0f26;border-radius:10px;border:1px dashed rgba(255,255,255,.08);overflow:hidden}
.node{position:absolute;min-width:120px;max-width:200px;background:#111b3b;border:1px solid rgba(255,255,255,.12);border-radius:10px;padding:10px 10px 8px;color:#e9f3ff;box-shadow:0 6px 16px rgba(0,0,0,.35);cursor:grab}
.node .hd{display:flex;align-items:center;gap:8px;margin-bottom:6px}
.node .hd .dot{width:10px;height:10px;border-radius:999px;background:var(--primary);box-shadow:0 0 8px var(--primary)}
.node .body{font-size:12px;color:#b7c3d8}
.node.err{border-color:rgba(255,107,107,.7);box-shadow:0 0 0 2px rgba(255,107,107,.25)}
.hint{position:absolute;bottom:10px;left:12px;color:#9fb2ff;font-size:12px;opacity:.9}

.port{position:absolute;right:-6px;top:50%;transform:translateY(-50%);width:12px;height:12px;border-radius:50%;background:#0e1736;border:1px solid rgba(255,255,255,.18);display:flex;align-items:center;justify-content:center}
.port::after{content:"";width:6px;height:6px;border-radius:50%;background:#73f9ff;box-shadow:0 0 8px #73f9ff}

.toast{position:fixed;top:16px;right:16px;background:#0b122e;color:#dff7ff;border:1px solid rgba(255,255,255,.12);padding:10px 12px;border-radius:10px;opacity:0;transform:translateY(-10px);transition:.2s}
.toast.show{opacity:1;transform:translateY(0)}
